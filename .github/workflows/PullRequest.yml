name: Pull Request

on: pull_request

permissions:
  contents: read

env:
  DOTNET_NOLOGO: true

jobs:
  build_and_test:
    name: Build and Test
    uses: ./.github/workflows/reusable-build-test.yml
    with:
      version: ${{ github.run_number }}.0.0-alpha
    secrets:
      codecov_token: ${{ secrets.CODECOV_TOKEN }}

  build_docker:
    name: Build Docker Image
    needs: build_and_test
    uses: ./.github/workflows/reusable-docker.yml
    with:
      dockerfile_path: ./Dockerfile
      registry: ghcr.io
      registry_username: ${{ github.repository_owner }}
      image_name: ${{ github.repository_owner }}/dashboard
      push: false
    secrets:
      registry_password: ${{ secrets.GITHUB_TOKEN }}
